# ============================================================
# HYPERBEATS ENVIRONMENT CONFIGURATION
# Oracle Cloud Free Tier + Cloudflare ($0/month Stack)
# ============================================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# ===========================================
# APPLICATION
# ===========================================
APP_NAME=hyperbeats
APP_ENV=production
DEBUG=false
LOG_LEVEL=INFO

# ===========================================
# SERVER
# ===========================================
HOST=0.0.0.0
PORT=8000
WORKERS=4

# ===========================================
# DATABASE - Oracle Autonomous Database (FREE TIER)
# ===========================================
# Oracle Autonomous DB: 20GB FREE forever
# Get connection string from Oracle Cloud Console:
# Autonomous Database > Your DB > DB Connection > Connection Strings
DATABASE_URL=postgresql+asyncpg://ADMIN:YourPassword@adb.us-ashburn-1.oraclecloud.com:1522/hyperbeats_high
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# Alternative: Self-hosted PostgreSQL on Oracle VM
# DATABASE_URL=postgresql+asyncpg://hyperbeats:hyperbeats@localhost:5432/hyperbeats

# ===========================================
# CACHE - Redis (Self-hosted on Oracle VM)
# ===========================================
# Redis runs in Docker on Oracle A1.Flex VM (FREE)
# 24GB RAM available - allocate 16GB to Redis
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_TTL=3600
REDIS_MAX_MEMORY=16gb

# ===========================================
# GITHUB API (FREE TIER)
# ===========================================
# Get your token at: https://github.com/settings/tokens
# Free tier: 5,000 requests/hour (authenticated)
# Required scopes: repo (read), read:org
GITHUB_TOKEN=ghp_your_github_token_here
GITHUB_API_BASE_URL=https://api.github.com
GITHUB_RATE_LIMIT_BUFFER=100

# ===========================================
# CLOUDFLARE (FREE TIER)
# ===========================================
# Sign up: cloudflare.com (FREE plan)
# Get API token: dash.cloudflare.com/profile/api-tokens
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
CLOUDFLARE_ZONE_ID=your_zone_id
CLOUDFLARE_ACCOUNT_ID=your_account_id

# R2 Object Storage (10GB FREE)
# Create bucket: dash.cloudflare.com > R2
R2_BUCKET=hyperbeats-charts
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key
R2_ENDPOINT=https://your_account_id.r2.cloudflarestorage.com

# CDN Base URL (your Cloudflare domain)
CDN_BASE_URL=https://charts.hyperionkit.xyz

# ===========================================
# ORACLE CLOUD (FREE TIER)
# ===========================================
# Oracle Object Storage (10GB FREE) - backup option
OCI_BUCKET_NAME=hyperbeats-backup
OCI_NAMESPACE=your_namespace
OCI_REGION=us-ashburn-1

# ===========================================
# SECURITY
# ===========================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=generate-a-secure-64-character-key-here

# API Key Header name
API_KEY_HEADER=X-API-Key

# CORS Origins (your domains)
CORS_ORIGINS=https://hyperionkit.xyz,https://beats.hyperionkit.xyz,http://localhost:3000

# ===========================================
# RATE LIMITING
# ===========================================
# Cloudflare handles DDoS, these are app-level limits
RATE_LIMIT_PUBLIC=100
RATE_LIMIT_AUTHENTICATED=1000
RATE_LIMIT_WINDOW=3600

# ===========================================
# RENDERING
# ===========================================
# Chromium path (install: apt install chromium-browser)
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser
PNG_DEFAULT_DPI=150
SVG_DEFAULT_WIDTH=800
SVG_DEFAULT_HEIGHT=400

# ===========================================
# MONITORING - Self-hosted on Oracle VM2
# ===========================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# ===========================================
# ORACLE VM CONFIGURATION
# ===========================================
# VM1: Backend + Redis (2 OCPU, 12GB RAM)
# VM2: Prometheus + Grafana (2 OCPU, 12GB RAM)
# Total: 4 OCPU, 24GB RAM (FREE FOREVER)

# VM1 Internal IP (for service communication)
VM1_INTERNAL_IP=10.0.0.2
# VM2 Internal IP
VM2_INTERNAL_IP=10.0.0.3

# ===========================================
# DOMAIN CONFIGURATION
# ===========================================
# Point these to your Oracle VM public IP via Cloudflare
DOMAIN=hyperionkit.xyz
API_SUBDOMAIN=beats.hyperionkit.xyz
CHARTS_SUBDOMAIN=charts.hyperionkit.xyz

# ===========================================
# OPTIONAL: ERROR TRACKING (FREE TIERS)
# ===========================================
# Sentry: 5,000 errors/month FREE
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# Logtail: 1GB/month FREE
# LOGTAIL_TOKEN=your_logtail_token

# ===========================================
# QUICK SETUP COMMANDS
# ===========================================
# 1. Oracle Cloud: oracle.com/cloud/free
# 2. Create 2x VM.Standard.A1.Flex (FREE)
# 3. Create Autonomous Database (FREE)
# 4. SSH: ssh ubuntu@your-oracle-vm-ip
# 5. Clone: git clone your-repo && cd hyperbeats
# 6. Deploy: docker-compose up -d
# 7. Cloudflare: Add A record -> Oracle VM IP
# 8. Test: curl https://beats.hyperionkit.xyz/health
